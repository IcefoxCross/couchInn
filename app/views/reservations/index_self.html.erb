<h1>Mis Reservas</h1>

<div class="row">
  <div class="col-md-8">

    <table class="table">
      <thead>
        <tr>
          <th>Hospedaje</th>
          <th>Fecha de Inicio</th>
          <th>Fecha Final</th>
          <th>Estado</th>
          <th colspan="1"></th>
        </tr>
      </thead>

      <tbody>
        <% @reservations.each do |reservation| %>
          <% if !(reservation.end_date < Date.current && !reservation.confirmed?) %>
            <tr>
              <td><h4><%= reservation.couch.name %></h4></td>
              <td><h4><%= reservation.start_date %></h4></td>
              <td><h4><%= reservation.end_date %></h4></td>
              <% if reservation.confirmed? %>
                <td><h4><span class="label label-default">Confirmado</span><h4></td>
              <% else %>
                <td><h4><span class="label label-warning">En espera</span><h4></td>
              <% end %>
              <% if reservation.start_date > Date.current %>
                <td><%= link_to 'Cancelar', reservation, method: :delete, data: { confirm: '¿Seguro de querer elimirar la Reserva?' }, class: "btn btn-danger" %></td>
              <% end %>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>

  </div>
  <div class="col-md-4">
    <h3>Info</h3>
    <p>Si cancela una reserva esta se perdera sin importar si esta 'En espera' o 'Confirmada' y en este último caso el Hospedaje pasara a estar libre entre esas fechas.<br>
    Las reservas antiguas confirmadas no se pueden eliminar porque forman parte del historial y las que nunca fueron confirmadas se borran automaticamente.</p>
  </div>
</div>
